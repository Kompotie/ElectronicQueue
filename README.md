# Electronic Queue 

Учебный прототип «электронной очереди»: Android-клиент отправляет заявку на постановку в очередь, сервер на «Raspberry Pi» (эмулируем Python-сервис) выдаёт порядковый номер и ведёт текущее состояние очереди. Когда очередь «доходит» до пользователя, приложение показывает уведомление.

## Состав проекта

- **Android-приложение (Android Studio / Java)**  
  Экран ввода имени → постановка в очередь → экран статуса (мой номер, текущий обслуживаемый номер). Уведомление появляется, когда «текущий» номер достигает номера пользователя.
- **Сервер (Python 3, HTTP + JSON, SQLite)**  
  Хранит очередь, выдаёт номера, переключает «текущий» номер, отдаёт состояние очереди.  
  В реальном железе это мог бы быть Raspberry Pi; в учебной задаче сервер запускается на ПК/ВМ.

## Быстрый запуск

### 1) Сервер

```bash
cd server
python3 server.py
```

По умолчанию сервер слушает `http://0.0.0.0:8080`.

По умолчанию включено авто-продвижение очереди раз в 10 секунд (для демонстрации). При необходимости можно отключить:

```bash
EQ_AUTO_ADVANCE=0 python3 server.py
```

Проверка:

```bash
curl http://localhost:8080/health
```

### 2) Android-приложение

1. Откройте корень репозитория в Android Studio (Gradle-проект).
2. Запустите приложение на **Android Emulator**.
3. Введите имя → нажмите «Встать в очередь».

> В коде клиента базовый URL: `http://10.0.2.2:8080` (это «host-машина» глазами Android Emulator).  
> Если сервер запускается **внутри ВМ**, используйте проброс порта ВМ на хост (например, ВМ:8080 → Хост:8080).


## HTTP API (кратко)

- `GET /health` → `{"status":"ok"}`
- `POST /queue/join` body: `{"name":"..."}` → `{"ticket":1,"position":0,"current_ticket":0}`
- `GET /queue/status?ticket=1` → `{"ticket":1,"status":"WAITING","position":0,"current_ticket":0}`
- `POST /queue/next` → сдвиг обслуживаемого номера (для демонстрации)
- `POST /queue/reset` → очистка очереди (для демонстрации)


## Структура репозитория

```
.
├── app/                # Android‑модуль
├── server/             # Python‑сервер (эмуляция логики Raspberry Pi)
├── Отчет.docx          # Отчёт по работе
└── README.md
```

## Сценарий демонстрации

1. Запустить сервер, убедиться в `GET /health`.
2. Запустить приложение на эмуляторе, встать в очередь (получить номер).
3. В другом терминале вызвать `POST /queue/next` несколько раз.
4. Убедиться, что на телефоне появляется уведомление, когда очередь дошла.